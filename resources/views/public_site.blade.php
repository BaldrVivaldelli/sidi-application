<!DOCTYPE html>
<html>


<style>
h5{
	font-size:2em;
	line-height: 75%;
	text-indent: 40px;
	word-wrap: break-word;
}

.container{
	width: 100%;
    display: inline-block;
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
button {
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        background-color: transparent;
        border-radius: 0.375em;
        border: 0;
        box-shadow: inset 0 0 0 2px #f56a6a;
        color: #f56a6a !important;
        cursor: pointer;
        display: inline-block;
        font-family: "Roboto Slab", serif;
        font-size: 0.8em;
        font-weight: 700;
        height: 3.5em;
        letter-spacing: 0.075em;
        line-height: 3.5em;
        padding: 0 2.25em;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        white-space: nowrap;
		position: absolute;
		left: 2px;
		bottom: 3px;
    }
	
	
.region_uno_archivo_uno {
    top: 0%;
    width: 120em;
    height: 37em;
    margin: 0%;
    padding: 0;
    display: table-cell;
    vertical-align: middle;
    border-style: solid;
    border-width: 4px;
    }
	
	
.region_uno_archivo_uno a{
	margin: 0;
	max-height: 50em;

}

.region_uno_archivo_uno img{
	width: auto;
	max-height: 37em;
	height:auto;
	display:block;
	margin:auto;
	
}

.region_uno_archivo_uno video{
	max-height: 37em;
	width: 100%;
	margin: 20% 0;

}
.region_uno_archivo_uno iframe{
	width: 100%;
    height: 37em;
	
}



    .region_tres_archivo_uno {
    top: 0%;
    width: 59em;
    height: 37em;
    margin: 0%;
    padding: 0;
    display: table-cell;
    vertical-align: middle;
    border-style: solid;
    border-width: 4px;
    }

.region_tres_archivo_uno a{
	margin: 0;
	max-height: 50em;

}

.region_tres_archivo_uno img{
	width: auto;
	max-height: 37em;
	height:auto;
	display:block;
	margin:auto;
	
}

.region_tres_archivo_uno video{
	max-height: 50em;
	width: 100%;
	margin: 20% 0;

}
.region_tres_archivo_uno iframe{
	width: 100%;
    height: 50em;
	
}




    .region_tres_archivo_dos {
    left: 70%;
    width: 29%;
    height: 20em;
    position: absolute;
    top: 0.97%;
    float: right;
    border-style: solid;
    }

    .region_tres_archivo_dos img {

    width: auto;
	max-height: 18em;
	height:auto;
	max-width: 100%;
	display:block;
	margin:auto;

    }

.region_tres_archivo_dos video{
	max-height: 18em;
    width: auto;
    max-width: 100%;
	margin: 5% 0;

}
.region_tres_archivo_dos iframe{
	width: 100%;
   height: 18em;
	
}





    .region_tres_archivo_tres {
    left: 70%;
    width: 29%;
    height: 17em;
    position: absolute;
    top: 50%;
    float: right;
    border-style: solid;
    }

    .region_tres_archivo_tres img {
    width: auto;
	max-height: 17em;
	height:auto;
	max-width: 100%;
	display:block;
	margin:auto;

    }
	.region_tres_archivo_tres video{
	max-height: 17em;
    width: auto;
    max-width: 100%;
	margin: 5% 0;
	

}
.region_tres_archivo_tres iframe{
	width: 100%;
    height: 17em;
	max-width:29%;
	
}
	
	

    /* region cuatro */

    .region_cuatro_archivo_uno {
    top: 0%;
    width: 70%;
    height: 30em;
    margin: 0%;
    display: inline-block;
    padding: 0;
    border-style: solid
    }
    .region_cuatro_archivo_uno img {
    width: auto;
	max-height: 30em;
	height:auto;
	max-width: 100%;
	margin:auto;

    }
	.region_cuatro_archivo_uno video{
	max-height: 30em;
    width: auto;
    max-width:70%;
	margin: 5% 0;
	

}
.region_cuatro_archivo_uno iframe{
	width: 100%;
    height: 30em;
	max-width:100%;
	
}

    .region_cuatro_archivo_dos {
        
   left: 70%;
    width: 29%;
    height: 50%;
    position: absolute;
    top: 1.2%;
    float: right;
    border-style: solid;

    }
.region_cuatro_archivo_dos iframe{
height: 20.7em;
max-height: 20.7em;
width: 29%;
}

    .region_cuatro_archivo_dos img {
        width: auto;
	max-height:  20.7em;
	height:auto;
	max-width: 100%;
	margin:auto;
    }

	.region_cuatro_archivo_dos video{
	height: 20.7em;
	max-height: 20.7em;
	width: 100%
	}




    .region_cuatro_archivo_tres {
   left: 70%;
    width: 29%;
    height: 40.2%;
    position: absolute;
    top: 52%;
    float: right;
    border-style: solid;
    }

.region_cuatro_archivo_tres iframe{
	height: 20.7em;
	max-height: 20.7em;
	width: 29%;
}

.region_cuatro_archivo_tres img {
    width: auto;
	max-height:  20.7em;
	height:auto;
	max-width: 100%;
	margin:auto;
	
    }

.region_cuatro_archivo_tres video{
	height: 20.7em;
	max-height: 20.7em;
	width: 100%
	}

    .region_cuatro_archivo_cuatro {
    width: 69.3%;
    height: 17.3%;
    position: absolute;
    top: 75%;
    float: right;
    border-style: solid;
    }

    .region_cuatro_archivo_cuatro img {
        width: auto;
		max-height: 17.3%;
		margin:auto;
    }

    a {
        display: block;
        padding: 1%;
        font-family: "Roboto Slab", serif;
        font-weight: 700;
        line-height: 1.5;
    }
	
	
/*MOVILE------------------------------------------------------------------------------------------------------------ */
	
@media (max-width: 360px){

.container{
	width: 100%;
    display: inline-block;
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
button {
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        background-color: transparent;
        border-radius: 0.375em;
        border: 0;
        box-shadow: inset 0 0 0 2px #f56a6a;
        color: #f56a6a !important;
        cursor: pointer;
        display: inline-block;
        font-family: "Roboto Slab", serif;
        font-size: 0.8em;
        font-weight: 700;
        height: 3.5em;
        letter-spacing: 0.075em;
        line-height: 3.5em;
        padding: 0 2.25em;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        white-space: nowrap;
		position: absolute;
		left: 0;
		bottom: 0px;
    }
	
/*REGION UNO------------------------------------------------------------------------------------------------------------ */	
.region_uno_archivo_uno {
    top: 0%;
    width: 120em;
    height: 37em;
    margin: 0%;
    padding: 0;
    display: table-cell;
    vertical-align: middle;
    
    }
	
	
.region_uno_archivo_uno a{
	margin: 0;
	max-height: 50em;

}

.region_uno_archivo_uno img{
	width: auto;
	max-height: 37em;
	height:auto;
	display:block;
	margin:auto;
	
}

.region_uno_archivo_uno video{
	max-height: 37em;
	width: 100%;
	margin: 20% 0;

}
.region_uno_archivo_uno iframe{
	width: 100%;
    height: 37em;
	
}


/*REGION TRES------------------------------------------------------------------------------------------------------------ */	
    .region_tres_archivo_uno {
    top: 0%;
    width: 16em;
    height: 37em;
    margin: 0%;
    padding: 0;
    display: table-cell;
    vertical-align: middle;
    border-style: hidden;
    }

.region_tres_archivo_uno a{
	margin: 0;
	max-height: 50em;

}

.region_tres_archivo_uno img{
	width: auto;
	max-height: 37em;
	height:auto;
	display:block;
	margin:auto;
	
}

.region_tres_archivo_uno video{
	max-height: 50em;
	width: 100%;
	margin: 20% 0;

}
.region_tres_archivo_uno iframe{
	width: 100%;
    height: 50em;
	
}




    .region_tres_archivo_dos {
    left: 70%;
    width: 29%;
    width: 6.2em;
    position: absolute;
    top: 0.97%;
    float: right;
    border-style: hidden;
    }

    .region_tres_archivo_dos img {

    width: auto;
	max-height: 18em;
	height:auto;
	max-width: 100%;
	display:block;
	margin:auto;

    }

.region_tres_archivo_dos video{
	max-height: 18em;
    width: auto;
    max-width: 100%;
	margin: 5% 0;

}
.region_tres_archivo_dos iframe{
	width: 100%;
   height: 18em;
	
}





    .region_tres_archivo_tres {
    left: 70%;
    width: 6.2em;
    height: 17em;
    position: absolute;
    top: 50%;
    float: right;
    border-style: hidden;
    }

    .region_tres_archivo_tres img {
    width: auto;
	max-height: 17em;
	height:auto;
	max-width: 100%;
	display:block;
	margin:auto;

    }
	.region_tres_archivo_tres video{
	max-height: 17em;
    width: auto;
    max-width: 100%;
	margin: 5% 0;
	

}
.region_tres_archivo_tres iframe{
	width: 100%;
    height: 17em;
	max-width:29%;
	
}
	
	

   
/*REGION CUATRO------------------------------------------------------------------------------------------------------------ */	

    .region_cuatro_archivo_uno {
    top: 0%;
    width: 70%;
    height: 29.3em;
    margin: 0%;
    display: inline-block;
    padding: 0;
    border-style: hidden;
    }
    .region_cuatro_archivo_uno img {
    width: auto;
	max-height: 29.3em;
	height:auto;
	max-width: 100%;
	margin:auto;

    }
	.region_cuatro_archivo_uno video{
	max-height: 29.3em;
    width: auto;
    max-width:70%;
	margin: 5% 0;
	

}
.region_cuatro_archivo_uno iframe{
	width: 100%;
    height: 29.3em;
	max-width:100%;
	
}

    .region_cuatro_archivo_dos {
        
   left: 70%;
    width: 29%;
    width: 11.8em;
    position: absolute;
    top: 1.2%;
    float: right;
 border-style: hidden;

    }
.region_cuatro_archivo_dos iframe{
height: 20.7em;
max-height: 20.7em;
width: 29%;
}

    .region_cuatro_archivo_dos img {
        width: auto;
	max-height:  20.7em;
	height:auto;
	max-width: 100%;
	margin:auto;
    }

	.region_cuatro_archivo_dos video{
	height: 20.7em;
	max-height: 20.7em;
	width: 100%
	}




    .region_cuatro_archivo_tres {
   left: 70%;
    width: 29%;
    width: 11.8em;
    position: absolute;
    top: 52%;
    float: right;
  border-style: hidden;
    }

.region_cuatro_archivo_tres iframe{
	height: 20.7em;
	max-height: 20.7em;
	width: 29%;
}

.region_cuatro_archivo_tres img {
    width: auto;
	max-height:  20.7em;
	height:auto;
	max-width: 100%;
	margin:auto;
	
    }

.region_cuatro_archivo_tres video{
	height: 20.7em;
	max-height: 20.7em;
	width: 100%
	}

    .region_cuatro_archivo_cuatro {
    width: 66%;
    height: 17.3%;
    position: absolute;
    top: 75%;
    float: right;
    
    }

    .region_cuatro_archivo_cuatro img {
        width: auto;
		max-height: 17.3%;
		margin:auto;
    }

    a {
        display: block;
        padding: 1%;
        font-family: "Roboto Slab", serif;
        font-weight: 700;
        line-height: 1.5;
    }
	

.region_tres_archivo_dos iframe{
	width: 100%;
   height: 18em;
	
}





    .region_tres_archivo_tres {
    left: 70%;
    width: 6.2em;
    height: 17em;
    position: absolute;
    top: 50%;
    float: right;
    border-style: hidden;
    }

    .region_tres_archivo_tres img {
    width: auto;
	max-height: 17em;
	height:auto;
	max-width: 100%;
	display:block;
	margin:auto;

    }
	.region_tres_archivo_tres video{
	max-height: 17em;
    width: auto;
    max-width: 100%;
	margin: 5% 0;
	

}
.region_tres_archivo_tres iframe{
	width: 100%;
    height: 17em;
	max-width:29%;
	
}
	
	

   
/*REGION CUATRO------------------------------------------------------------------------------------------------------------ */	

    .region_cuatro_archivo_uno {
    top: 0%;
    width: 70%;
    height: 29.3em;
    margin: 0%;
    display: inline-block;
    padding: 0;
    border-style: hidden;
    }
    .region_cuatro_archivo_uno img {
    width: auto;
	max-height: 29.3em;
	height:auto;
	max-width: 100%;
	margin:auto;

    }
	.region_cuatro_archivo_uno video{
	max-height: 29.3em;
    width: auto;
    max-width:70%;
	margin: 5% 0;
	

}
.region_cuatro_archivo_uno iframe{
	width: 100%;
    height: 29.3em;
	max-width:100%;
	
}

    .region_cuatro_archivo_dos {
        
   left: 70%;
    width: 29%;
    width: 6.5em;
    position: absolute;
    top: 1.2%;
    float: right;
 border-style: hidden;

    }
.region_cuatro_archivo_dos iframe{
height: 20.7em;
max-height: 20.7em;
width: 29%;
}

    .region_cuatro_archivo_dos img {
        width: auto;
	max-height:  20.7em;
	height:auto;
	max-width: 100%;
	margin:auto;
    }

	.region_cuatro_archivo_dos video{
	height: 20.7em;
	max-height: 20.7em;
	width: 100%
	}




    .region_cuatro_archivo_tres {
   left: 70%;
    
    width: 6.5em;
    position: absolute;
    top: 52%;
    float: right;
  border-style: hidden;
    }

.region_cuatro_archivo_tres iframe{
	height: 20.7em;
	max-height: 20.7em;
	width: 29%;
}

.region_cuatro_archivo_tres img {
    width: auto;
	max-height:  20.7em;
	height:auto;
	max-width: 100%;
	margin:auto;
	
    }

.region_cuatro_archivo_tres video{
	height: 20.7em;
	max-height: 20.7em;
	width: 100%
	}

    .region_cuatro_archivo_cuatro {
    width: 66%;
    height: 17.3%;
    position: absolute;
    top: 75%;
    float: right;
    border-style: hidden;
    }

    .region_cuatro_archivo_cuatro img {
        width: auto;
		max-height: 17.3%;
		margin:auto;
    }

    a {
        display: block;
        padding: 1%;
        font-family: "Roboto Slab", serif;
        font-weight: 700;
        line-height: 1.5;
    }
	
	
}
</style>


<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Cliente SIDI</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>

<body>
    <!-- <button id="find-me">Show my location</button><br />
    <p id="status"></p>
    <a id="map-link" target="_blank"></a> -->


    <div id="container">
    </div>
    <!-- <video controls="controls" preload="auto" id="_video" width="640" height="360" autoplay="autoplay" loop="loop"></video>

    <img id="_img" /> -->
</body>
<script>
    let dataMc;
    fetch('{{ env('APP_URL')}}' +'/api/contenido/getAll/')
        .then(response => response.json())
        .then(data =>
            data.contenidos.forEach(contenido => {
                console.log(contenido);
                // var url = "https://sidi.dev/api/" + contenido;
                
                var url = "{{ env('APP_URL')}} " + contenido;
                var a = document.createElement('a');
                var link = document.createTextNode(contenido);
                a.appendChild(link);
                a.title = contenido;
                a.href = url;
                a.addEventListener('click', showContentFromUrl);
                document.body.appendChild(a);
            })
        );

    window.addEventListener("beforeunload", function(e) {
        // var xhr = new XMLHttpRequest();
        // url = "https://sidi.dev/api/contenido/logout";
        // xhr.open("POST", url, true);
        // xhr.setRequestHeader('Content-Type', 'application/json');
        // xhr.send(JSON.stringify({
        //     value: value
        // }));
        window.ws.send(
                JSON.stringify({
                    'type': 'logout',
                    'content': `${dataMc}`,
                })
        );
        setTimeout(function(){
                window.location.reload(1);
        }, 2000);
      
    });

    function sendLogoutContent() {
        console.log('se va a desconectar')
        window.ws.close();
    }

    function reloadPage() {
        window.ws.send(
                JSON.stringify({
                    'type': 'logout',
                    'content': `${dataMc}`,
                })
        );
        setTimeout(function(){
                window.location.reload(1);
        }, 2000);
    }

    
    function showContentFromUrl(event) {
        var cantidadDeCuatros = 0;
        var cuadrosActuales= 0;
        event.preventDefault();
        console.log('Se va a borrar todo el contenido');
        console.log('el contenido que se desea ver es el siguiente ' + this.href);
        if(dataMc == null){
            dataMc = this.title;
        }
        document.body.innerHTML = '';
        var containerDiv = document.createElement("div");
        containerDiv.id = "container";
        document.body.appendChild(containerDiv);

        //se crea el boton de vuelta
        var goback = document.createElement('button');

        goback.title = "volver";
        goback.value = "volver";
        goback.innerHTML = "Volver"
        goback.addEventListener('click', reloadPage);
        document.body.appendChild(goback);


        //abro el canal y me traigo la imagen   
        // window.ws = new WebSocket("wss://sidi.dev/wss");
        
        // window.ws = new WebSocket('ws://192.168.1.100:8090');                 
        window.ws = new WebSocket('ws://{{ config('app.socket_url')}}');        
        // window.ws = new WebSocket('ws://4.tcp.ngrok.io:17276');        
                 
        window.ws.onopen = function(e) {
            console.log('Connected to sidi');
            //en el momento que vuelve el "conectado" desde el back end se envia el pedido para obtener el contenido que se clickeo anteriormente     
            ws.send(
                JSON.stringify({
                    'type': 'snapshot',
                    'content': `${dataMc}`,
                })
            );
        }

     
        ws.onclose = function(e) {
            console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
            timeOut = setTimeout(function() {
                if(!ws || ws.readyState == 3){
                    showContentFromUrl(e);
                }else{
                    clearInterval(timeOut);
                }
            }, 5000);
        };


        window.ws.onmessage = function(e) {
            console.log('llego algo');
            var response = JSON.parse(e.data);
            console.log(response);
            switch (response.type) {
                case "snapshot":
                    console.log('volvio el contenido ')
                    console.log(e)
                    var json = JSON.parse(e.data);
                    if(json.archivo_nombre.includes("--CONTIENE DATO TEXTO--")){
                        var textValue = json.archivo_nombre.replace("--CONTIENE DATO TEXTO--","");                        
                        var section = document.createElement('section')
                        // var className = "region_uno_archivo_uno";
                        var className = json.region_size + "_archivo_" + json.numeroDeCuadro;
                        
                        section.className = className;                        
                        var dynLbl = document.createElement('H5');
                        dynLbl.innerHTML  = textValue;
                        dynLbl.className = className + "_data";
                        document.getElementById("container").appendChild(section);
                        section.appendChild(dynLbl);

                    }else if (json.archivo_nombre.includes("www.youtube.com/embed/")) {
                        var section = document.createElement('section')
                        // var className = "region_uno_archivo_uno";
                        var className = json.region_size + "_archivo_" + json.numeroDeCuadro;
                        section.className = className;

                        var dynImg = document.createElement('iframe');
                        dynImg.className = className + "_data";
                        dynImg.src = json.archivo_nombre +"?autoplay=1&mute=1&enablejsapi=1";
                        dynImg.autoplay = 1;
                        document.getElementById("container").appendChild(section);
                        section.appendChild(dynImg);

                    } else {
                        //var url = "http://192.168.1.100:90/api/contenido/getById/" + json.archivo_nombre;
                        var url = "{{ config('app.url')}}/api/contenido/getById/" + json.archivo_nombre;
                        var response = fetch(url)
                            .then(resp => resp.blob())
                            .then(blob => {
                                console.log(blob.type);
                                updateContentData(blob, url, json.region_size, json.numeroDeCuadro);
                            });
                    }
                    break;
                case "updateDisplay":

                    // console.log('Se va a borrar todo el contenido para poder actualizar');
                    // console.log('el contenido que se desea ver despues es el siguiente ' + this.href);

                    // document.body.innerHTML = '';
                    // var containerDiv = document.createElement("div");
                    // containerDiv.id = "container";
                    // document.body.appendChild(containerDiv);

                    // console.log('se actualiza el contenido ')
                    // console.log(e)
                    // var json = JSON.parse(e.data);
                    // var url = "https://sidi.dev/api/contenido/getById/" + json.archivo_nombre;
                    // var response = fetch(url)
                    //     .then(resp => resp.blob())
                    //     .then(blob => {
                    //         console.log(blob.type);
                    //         updateContentData(blob, url, json.region_size, json.numeroDeCuadro);
                    //     });
                    
                    var json = JSON.parse(e.data);                    
                    console.log('se actualizo el contenido ')
                    cuadrosActuales++;

                    var numeroParse;
                    if(json.numeroDeCuadro == "uno"){
                        numeroParse = 1;
                    }else if(json.numeroDeCuadro == "dos"){
                        numeroParse = 2;
                    }else if(json.numeroDeCuadro == "tres"){
                        numeroParse = 3;
                    }if(json.numeroDeCuadro == "cuatro"){
                        numeroParse = 4;
                    }

                    if(numeroParse < cuadrosActuales || json.region_size != cantidadDeCuatros){
                    // if(json.numeroDeCuadro < cuadrosActuales || json.numeroDeCuadro != cantidadDeCuatros){

                        console.log('Se va a borrar todo el contenido para poder actualizar');
                        console.log('el contenido que se desea ver despues es el siguiente ' + this.href);
                        document.body.innerHTML = '';
                        // cantidadDeCuatros = json.numeroDeCuadro;
                        cantidadDeCuatros = json.region_size;
                        var containerDiv = document.createElement("div");
                        containerDiv.id = "container";
                        document.body.appendChild(containerDiv);
                        console.log('se actualiza el contenido ')
                        console.log(e)
                        cuadrosActuales = 1;
                    }

                    
                    if(json.archivo_nombre.includes("--CONTIENE DATO TEXTO--")){
                        var textValue = json.archivo_nombre.replace("--CONTIENE DATO TEXTO--","");                        
                        var section = document.createElement('section')
                        // var className = "region_uno_archivo_uno";
                        var className = json.region_size + "_archivo_" + json.numeroDeCuadro;
                        section.className = className;                        
                        var dynLbl = document.createElement('H5');
                        dynLbl.innerHTML  = textValue;
                        dynLbl.className = className + "_data";
                        document.getElementById("container").appendChild(section);
                        section.appendChild(dynLbl);

                    }else if (json.archivo_nombre.includes("www.youtube.com/embed/")) {
                        var section = document.createElement('section')
                        // var className = "region_uno_archivo_uno";
                        var className = json.region_size + "_archivo_" + json.numeroDeCuadro;
                        section.className = className;

                        var dynImg = document.createElement('iframe');
                        dynImg.className = className + "_data";
                        dynImg.src = json.archivo_nombre +"?autoplay=1&mute=1&enablejsapi=1";
                        dynImg.autoplay = 1;
                        dynImg.muted = 1;
                        document.getElementById("container").appendChild(section);
                        section.appendChild(dynImg);


                    }else{
                        
                        // var url = "http://192.168.1.100:90/api/contenido/getById/" + json.archivo_nombre;
                        var url = "{{ config('app.url')}}/api/contenido/getById/" + json.archivo_nombre;
                        var response = fetch(url)
                        .then(resp => resp.blob())
                        .then(blob => {
                            console.log(blob.type);
                            updateContentData(blob, url, json.region_size, json.numeroDeCuadro);
                        });
                    }               
                    
                    break;
                case "userBlocked":

                    console.log('Se va a borrar todo el contenido para poder actualizar');
                    console.log('el contenido que se desea ver despues es el siguiente ' + this.href);

                    document.body.innerHTML = '';
                    var containerDiv = document.createElement("div");
                    containerDiv.id = "container";
                    document.body.appendChild(containerDiv);

                    console.log('se actualiza el contenido ')
                    console.log(e)
                    // var url = "http://192.168.1.100:90/api/contenido/EnableDisableContent";
                    var url = "{{ config('app.url')}}/api/contenido/EnableDisableContent";
                    var response = fetch(url)
                        .then(resp => resp.json())
                        .then(json => {
                            console.log(json.type);
                            // updateContentData(blob,url);                                                   
                        });
                    break;
                case "deleteDisplay":
                    location.reload();
                    break;
                case "incremental":
                    var json = JSON.parse(e.data);                    
                    console.log('se actualizo el contenido ')
                    cuadrosActuales++;
                    var numeroParse;
                    if(json.numeroDeCuadro == "uno"){
                        numeroParse = 1;
                    }else if(json.numeroDeCuadro == "dos"){
                        numeroParse = 2;
                    }else if(json.numeroDeCuadro == "tres"){
                        numeroParse = 3;
                    }if(json.numeroDeCuadro == "cuatro"){
                        numeroParse = 4;
                    }

                    if(numeroParse < cuadrosActuales || json.region_size != cantidadDeCuatros){

                        console.log('Se va a borrar todo el contenido para poder actualizar');
                        console.log('el contenido que se desea ver despues es el siguiente ' + this.href);
                        document.body.innerHTML = '';
                        cantidadDeCuatros = json.region_size;
                        var containerDiv = document.createElement("div");
                        containerDiv.id = "container";
                        document.body.appendChild(containerDiv);
                        console.log('se actualiza el contenido ')
                        console.log(e)
                        cuadrosActuales = 1;
                    }
                    
                    if(json.archivo_nombre.includes("--CONTIENE DATO TEXTO--")){
                        var textValue = json.archivo_nombre.replace("--CONTIENE DATO TEXTO--","");                        
                        var section = document.createElement('section')
                        // var className = "region_uno_archivo_uno";
                        var className = json.region_size + "_archivo_" + json.numeroDeCuadro;
                        section.className = className;                        
                        var dynLbl = document.createElement('H5');
                        dynLbl.innerHTML  = textValue;
                        dynLbl.className = className + "_data";
                        document.getElementById("container").appendChild(section);
                        section.appendChild(dynLbl);

                    }else if (json.archivo_nombre.includes("www.youtube.com/embed/")) {
                        var section = document.createElement('section')
                        // var className = "region_uno_archivo_uno";
                        // var className = region_size + "_archivo_" + numeroDeCuadro;
                        var className = json.region_size + "_archivo_" + json.numeroDeCuadro;
                        section.className = className;

                        var dynImg = document.createElement('iframe');
                        dynImg.className = className + "_data";
                        dynImg.src = json.archivo_nombre +"?autoplay=1&mute=1&enablejsapi=1";
                        dynImg.autoplay = 1;
                        dynImg.muted = 1;
                        document.getElementById("container").appendChild(section);
                        section.appendChild(dynImg);


                    }else{
                        // var url = "http://192.168.1.100:90/api/contenido/getById/" + json.archivo_nombre;
                        var url = "{{ config('app.url')}}/api/contenido/getById/" + json.archivo_nombre;
                        var response = fetch(url)
                        .then(resp => resp.blob())
                        .then(blob => {
                            console.log(blob.type);
                            updateContentData(blob, url, json.region_size, json.numeroDeCuadro);
                        });
                    }                        
                    break;
            }
        }
    }


    function updateContentData(blob, url, region_size, numeroDeCuadro) {
        switch (blob.type) {
            case "image/jpeg":
                var section = document.createElement('section')
                var className = region_size + "_archivo_" + numeroDeCuadro;
                section.className = className;
                var dynImg = new Image();
                dynImg.className = className + "_data";
                dynImg.src = url;
                document.getElementById("container").appendChild(section);
                section.appendChild(dynImg);
                break;
            case "image/png":
                var section = document.createElement('section')
                var className = region_size + "_archivo_" + numeroDeCuadro;
                section.className = className;
                var dynImg = new Image();
                dynImg.className = className + "_data";
                dynImg.src = url;
                document.getElementById("container").appendChild(section);
                section.appendChild(dynImg);
                break;
            case "video/mp4":
                var section = document.createElement('section')
                // var className = "region_uno_archivo_uno";
                var className = region_size + "_archivo_" + numeroDeCuadro;
                section.className = className;
                var video = document.createElement('video');
                video.src = url;
                video.type = blob.type;
                video.muted = "muted";
                video.autoplay = true;
                video.className = className + "_data";
                video.src = url;
                document.getElementById("container").appendChild(section);
                section.appendChild(video);

                break;
        }

    }

</script>


</html>